CREATE TABLE PUBLIC."users" (
	user_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	user_email VARCHAR (255) NOT NULL,
	user_login VARCHAR (255) NOT NULL,
	user_name VARCHAR (255) NOT NULL,
	user_birthday DATE NOT NULL
);

CREATE TABLE PUBLIC."films" (
	film_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	film_name VARCHAR (255) NOT NULL,
	description VARCHAR (255) NOT NULL,
	release_date DATE NOT NULL,
	duration INTEGER NOT NULL,
	genre_id INTEGER NOT NULL,
	rating_id VARCHAR (8) NOT NULL
);

CREATE TABLE PUBLIC."friends" (
	user_id INTEGER NOT NULL PRIMARY KEY,
	friend_id INTEGER NOT NULL,
	confirmed BOOLEAN
);

CREATE TABLE PUBLIC."likes" (
	user_id INTEGER NOT NULL PRIMARY KEY,
	film_id INTEGER NOT NULL
);

CREATE TABLE PUBLIC."rating" (
	rating_id INTEGER NOT NULL PRIMARY KEY,
	rating_name VARCHAR
);

CREATE TABLE PUBLIC."genre" (
	genre_id INTEGER NOT NULL PRIMARY KEY,
	genre_name VARCHAR
);

ALTER TABLE PUBLIC."likes" ADD CONSTRAINT LIKES_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."users"(USER_ID);
ALTER TABLE PUBLIC."likes" ADD CONSTRAINT LIKES_FILM_FK FOREIGN KEY (FILM_ID) REFERENCES PUBLIC."films"(FILM_ID);

ALTER TABLE PUBLIC."friends" ADD CONSTRAINT FRIENDS_USER_FK FOREIGN KEY (USER_ID) REFERENCES PUBLIC."users"(USER_ID);
ALTER TABLE PUBLIC."friends" ADD CONSTRAINT FRIENDS_FRIEND_FK FOREIGN KEY (FRIEND_ID) REFERENCES PUBLIC."users"(USER_ID);

ALTER TABLE PUBLIC."films" ADD CONSTRAINT FILMS_GENRE_FK FOREIGN KEY (GENRE_ID) REFERENCES PUBLIC."genre"(GENRE_ID);
ALTER TABLE PUBLIC."films" ADD CONSTRAINT FILMS_RATING_FK FOREIGN KEY (RATING_ID) REFERENCES PUBLIC."rating"(RATING_ID);